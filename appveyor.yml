environment:
   PHP_VERSION: 5.6.12

os: 
  - Visual Studio 2015
  - Windows Server 2012 R2

platform: 
  - x86
  - x64

configuration: Release

version: '0.0.{build}'

matrix:
  fast_finish: true

install:
  - cd C:\projects\sassphp
  - git submodule init
  - git submodule update
  - cd C:\
  - mkdir php-src
  - echo Preparing Windows build...
  - echo Downloading PHP source code [%PHP_VERSION%]
  - cd C:\php-src
  - appveyor DownloadFile http://windows.php.net/downloads/releases/php-5.6.12-src.zip -FileName php-src.zip
  - 7z x -y php-src.zip
  - '"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\SetEnv.cmd" /x64'

build_script: 
  - cd C:\php-src\php-5.6.12-src
  - buildconf.bat --add-modules-dir=C:\projects\sassphp
  - configure.bat --disable-all --enable-cli --enable-sass
  - nmake php_sass.dll

test: OFF

test_script: OFF

deploy: OFF

artifacts:
  - path: ext\Release_TS\php_sass.dll